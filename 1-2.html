<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LARUSSO –¢–µ—Å—Ç</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Rubik', sans-serif;
      background: linear-gradient(to right, #1f2937, #111827);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .card {
      background-color: #1c1f26;
      padding: 40px;
      max-width: 750px;
      width: 95%;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
      position: relative;
    }

    .logo {
      display: block;
      margin: 0 auto 25px;
      max-width: 160px;
      border-radius: 50%;
      border: 3px solid #10b981;
    }

    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 30px;
      color: #10b981;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background-color: #111827;
      color: #e5e7eb;
      font-size: 15px;
      margin-bottom: 5px;
    }

    input::placeholder {
      color: #9ca3af;
    }

    .error {
      color: #f87171;
      font-size: 13px;
      margin: 4px 0 15px;
      min-height: 18px;
    }

    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 15px;
    }
    .radio-label {
      flex: 1 1 calc(50% - 12px);
      background-color: #111827;
      padding: 14px 20px;
      border-radius: 12px;
      border: 2px solid #4b5563;
      cursor: pointer;
      position: relative;
      transition: background-color 0.3s ease, border-color 0.3s ease;
      user-select: none;
      color: #e5e7eb;
      font-weight: 500;
    }
    .radio-label:hover {
      border-color: #10b981;
      background-color: #172022;
    }
    .radio-label input[type="radio"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      margin: 0;
      height: 0;
      width: 0;
    }
    .radio-label input[type="radio"]:checked + span {
      background-color: #10b981;
      color: white;
      border-radius: 10px;
      padding: 6px 12px;
      font-weight: 600;
      display: inline-block;
      transition: background-color 0.3s ease;
    }

    button[type="submit"], .retry-btn {
      margin-top: 30px;
      width: 100%;
      padding: 14px;
      background-color: #10b981;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    button[type="submit"]:hover, .retry-btn:hover {
      background-color: #0f9f77;
    }
    .retry-btn {
      background-color: #ef4444;
      margin-top: 20px;
      display: none;
    }

    .result {
      margin-top: 25px;
      padding: 20px;
      background-color: #065f46;
      border-radius: 12px;
      text-align: center;
      font-size: 18px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      display: none;
      color: #fff;
    }
    .result.show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    .result strong {
      font-size: 20px;
      color: #fff;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–∞ –º—É–∑—ã–∫–∏ */
    label[for="musicSelect"] {
      margin-top: 20px;
      color: #10b981;
      font-weight: 600;
    }

    .music-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #10b981;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      z-index: 9999;
      box-shadow: 0 4px 8px rgba(16, 185, 129, 0.4);
      transition: background-color 0.3s ease, transform 0.2s ease;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .music-toggle:hover {
      background-color: #0f9f77;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <div class="card">
    <img src="logo.png" alt="LARUSSO Logo" class="logo" />
    <h1>–¢–µ—Å—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ<br>—Å 1 –Ω–∞ 2 —Ä–∞–Ω–≥<br>LARUSSO Family</h1>

    <form id="quizForm" novalidate>
      <label for="name">–í–∞—à –Ω–∏–∫:</label>
      <input type="text" id="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Family_Larusso" />
      <div class="error" id="errorName"></div>

      <!-- –í–æ–ø—Ä–æ—Å—ã -->
      <div id="questionsContainer"></div>

      <label for="musicSelect">–í—ã–±–µ—Ä–∏—Ç–µ –º—É–∑—ã–∫—É:</label>
      <select id="musicSelect">
        <option value="cala_bonita.m4a">Cala Bonita</option>
        <option value="clack_bum.m4a">Clack bum</option>
        <option value="hope.mp3">Hope</option>
        <option value="bala_love.m4a">Bala love</option>
        <option value="Montagem_r.m4a">Montagem R</option>
        <option value="PASSO_BEM_SOLTO_Ultra_Slowed.m4a">PASSO BEM SOLTO</option>
        <option value="Montagem_Bandido_S.m4a">Montagem Bandido S</option>
        <option value="bloody_ultra_slowed.m4a">BLOODY ULTRA SLOWED</option>
      </select>

      <button type="submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </form>

    <div class="result" id="resultBox"></div>
    <button class="retry-btn" id="retryBtn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
  </div>

  <audio id="bgMusic" loop></audio>

  <button class="music-toggle" id="musicToggleBtn">
    <span id="musicIcon">üîá</span> <span id="musicText">–í–∫–ª</span>
  </button>

  <script>
    // –î–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
    const questions = [
      {
        id: "q1",
        text: "1. –ú–æ–∂–Ω–æ –ª–∏ —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –Ω–∞—Ä–∫–æ—Ç–∏–∫–∏ —á–ª–µ–Ω–∞–º —Å–µ–º—å–∏, –Ω–µ —Å–æ—Å—Ç–æ—è—â–∏–º –≤ –ö–°, –Ω–∞ –∫—É–º–∏—Ç–µ –∏–ª–∏ –ú–ü?",
        correct: "–Ω–µ–ª—å–∑—è",
        options: [
          {value: "–Ω–µ–ª—å–∑—è", label: "–ù–µ–ª—å–∑—è ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–µ–º—å–∏."},
          {value: "–µ—Å–ª–∏_–Ω–∏–∫—Ç–æ", label: "–ú–æ–∂–Ω–æ, –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç."},
          {value: "–Ω–∞_–º–ø", label: "–ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ –ú–ü."},
          {value: "–≤—Å–µ–º_–º–æ–∂–Ω–æ", label: "–†–∞–∑—Ä–µ—à–µ–Ω–æ –≤—Å–µ–º, —É –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø."}
        ]
      },
      {
        id: "q2",
        text: "2. –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞—â–∏—Ç—É –ø—Ä–∞–≤ —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏?",
        correct: "–≥–ª–∞–≤–∞",
        options: [
          {value: "–≥–ª–∞–≤–∞", label: "–ì–ª–∞–≤–∞ —Å–µ–º—å–∏ ‚Äî –æ–Ω –≥–∞—Ä–∞–Ω—Ç –ø—Ä–∞–≤ –∏ –ø–æ—Ä—è–¥–∫–∞."},
          {value: "—Å–∞–º", label: "–ß–ª–µ–Ω—ã —Å–µ–º—å–∏ —Å–∞–º–∏ –∑–∞ —Å–µ–±—è –æ—Ç–≤–µ—á–∞—é—Ç."},
          {value: "–∞–¥–≤–æ–∫–∞—Ç", label: "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∞–¥–≤–æ–∫–∞—Ç."},
          {value: "–Ω–∏–∫—Ç–æ", label: "–ù–∏–∫—Ç–æ ‚Äî —É –Ω–∞—Å —Å–≤–æ–±–æ–¥–Ω–∞—è —Å–µ–º—å—è."}
        ]
      },
      {
        id: "q3",
        text: "3. –í –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —É –≥–ª–∞–≤—ã?",
        correct: "17",
        options: [
          {value: "17", label: "–í 17:00 –ø–æ –ú–°–ö ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º."},
          {value: "–≤_–ª—é–±–æ–µ", label: "–í –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –∏–≥—Ä–æ–∫–∞ –≤—Ä–µ–º—è."},
          {value: "—É—Ç—Ä–æ", label: "–° 9:00 –¥–æ 12:00."},
          {value: "–Ω–æ—á—å", label: "–ü–æ—Å–ª–µ 22:00, –∫–æ–≥–¥–∞ –≥–ª–∞–≤–∞ –Ω–µ –∑–∞–Ω—è—Ç."}
        ]
      },
      {
        id: "q4",
        text: "4. –î–æ–ª–∂–µ–Ω –ª–∏ –∫–∞–∂–¥—ã–π —Å —á–µ—Å—Ç—å—é –Ω–æ—Å–∏—Ç—å –∏–º—è –õ–∞—Ä—É—Å—Å–æ?",
        correct: "–¥–∞",
        options: [
          {value: "–¥–∞", label: "–î–∞ ‚Äî —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ —Å–µ–º—å–µ."},
          {value: "–ø–æ_–∂–µ–ª–∞–Ω–∏—é", label: "–ù–µ—Ç, —ç—Ç–æ –ø–æ –∂–µ–ª–∞–Ω–∏—é."},
          {value: "—Ç–æ–ª—å–∫–æ_–ª–∏–¥–µ—Ä—ã", label: "–¢–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä—ã –æ–±—è–∑–∞–Ω—ã."},
          {value: "–º–æ–∂–Ω–æ_—Å–∫—Ä—ã–≤–∞—Ç—å", label: "–ú–æ–∂–Ω–æ —Å–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ —Å–µ–º—å–µ."}
        ]
      },
      {
        id: "q5",
        text: "5. –ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π —á–ª–µ–Ω —Å–µ–º—å–∏?",
        correct: "–≤–Ω–æ—Å–∏—Ç—å",
        options: [
          {value: "–≤–Ω–æ—Å–∏—Ç—å", label: "–í–Ω–æ—Å–∏—Ç—å –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ —Å–µ–º—å–∏ –∏ –µ—ë –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç."},
          {value: "–Ω–∏—á–µ–≥–æ", label: "–ù–∏—á–µ–≥–æ, –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å –≤ —Å–µ–º—å–µ."},
          {value: "—Ç–æ–ª—å–∫–æ_—Å–≤–æ–∏", label: "–ó–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –¥–µ–ª–∞–º–∏."},
          {value: "—Ç–æ–ª—å–∫–æ_–≥–ª–∞–≤–µ", label: "–ü–æ–¥—á–∏–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–µ –∏ –Ω–µ –¥—É–º–∞—Ç—å –æ —Ä–∞–∑–≤–∏—Ç–∏–∏."}
        ]
      }
    ];

    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ (–§–∏—à–µ—Ä-–ô–µ–π—Ç—Å)
    function shuffleArray(array) {
      let arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ —Å —Ä–∞–¥–∏–æ –∫–Ω–æ–ø–∫–∞–º–∏
    function renderQuestions() {
      const container = document.getElementById('questionsContainer');
      container.innerHTML = '';

      questions.forEach(({id, text, options}) => {
        const qWrapper = document.createElement('div');
        qWrapper.innerHTML = `<label>${text}</label><div class="radio-group" id="${id}Group"></div><div class="error" id="error-${id}"></div>`;

        const optionsContainer = qWrapper.querySelector(`#${id}Group`);
        const shuffledOptions = shuffleArray(options);

        shuffledOptions.forEach(({value, label}) => {
          const optionHTML = `
            <label class="radio-label">
              <input type="radio" name="${id}" value="${value}" />
              <span>${label}</span>
            </label>
          `;
          optionsContainer.insertAdjacentHTML('beforeend', optionHTML);
        });

        container.appendChild(qWrapper);
      });
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–∏–∫ –∏ –æ—Ç–≤–µ—Ç—ã)
    function validate() {
      let valid = true;
      const nick = document.getElementById('name').value.trim();
      const errorName = document.getElementById('errorName');
      if (!nick) {
        errorName.textContent = '–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫';
        valid = false;
      } else {
        errorName.textContent = '';
      }

      questions.forEach(({id}) => {
        const errorEl = document.getElementById(`error-${id}`);
        const checked = document.querySelector(`input[name="${id}"]:checked`);
        if (!checked) {
          errorEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç';
          valid = false;
        } else {
          errorEl.textContent = '';
        }
      });

      return valid;
    }

    // –ü–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤
    function calculateScore() {
      let score = 0;
      questions.forEach(({id, correct}) => {
        const checked = document.querySelector(`input[name="${id}"]:checked`);
        if (checked && checked.value === correct) score++;
      });
      return score;
    }

    // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    const quizForm = document.getElementById('quizForm');
    const resultBox = document.getElementById('resultBox');
    const retryBtn = document.getElementById('retryBtn');

    quizForm.addEventListener('submit', e => {
      e.preventDefault();

      if (!validate()) return;

      const nick = document.getElementById('name').value.trim();
      const score = calculateScore();

      resultBox.innerHTML = `<strong>${nick}</strong><br>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ 5<br><br>` +
        (score === 5
          ? `üéâ –û—Ç–ª–∏—á–Ω–æ! –í—ã –≥–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é.<br><br>üì∏ <em>–°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω –¥–ª—è –æ—Ç—á—ë—Ç–∞</em>`
          : `üîÅ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.`);

      resultBox.classList.add('show');
      retryBtn.style.display = score < 5 ? 'block' : 'none';
      quizForm.style.display = 'none';
    });

    retryBtn.addEventListener('click', () => {
      quizForm.reset();
      renderQuestions();
      resultBox.classList.remove('show');
      retryBtn.style.display = 'none';
      quizForm.style.display = 'block';
      document.getElementById('errorName').textContent = '';
      questions.forEach(({id}) => {
        document.getElementById(`error-${id}`).textContent = '';
      });
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º—É–∑—ã–∫–∏ –∏ –∫–Ω–æ–ø–æ–∫
    const bgMusic = document.getElementById('bgMusic');
    const musicSelect = document.getElementById('musicSelect');
    const musicToggleBtn = document.getElementById('musicToggleBtn');
    const musicIcon = document.getElementById('musicIcon');
    const musicText = document.getElementById('musicText');
    let isPlaying = false;

    function toggleMusic() {
      if (isPlaying) {
        bgMusic.pause();
        musicIcon.textContent = 'üîá';
        musicText.textContent = '–í–∫–ª';
      } else {
        bgMusic.play().catch(() => {
          alert('–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–π—Ç–µ —Å —Å–∞–π—Ç–æ–º (–Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –µ—â—ë —Ä–∞–∑)');
        });
        musicIcon.textContent = 'üîä';
        musicText.textContent = '–í—ã–∫–ª';
      }
      isPlaying = !isPlaying;
    }

    musicToggleBtn.addEventListener('click', toggleMusic);

    musicSelect.addEventListener('change', () => {
      bgMusic.src = musicSelect.value;
      bgMusic.load();
      if (isPlaying) {
        bgMusic.play().catch(() => {});
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      bgMusic.src = musicSelect.value;
      renderQuestions();
    });
  </script>
</body>
</html>