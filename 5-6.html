<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Тест на повышение с 5 до 6 ранга — LARUSSO</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Rubik', sans-serif;
      background: linear-gradient(to right, #1f2937, #111827);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }
    .card {
      background-color: #1c1f26;
      padding: 40px;
      max-width: 750px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.4);
      position: relative;
    }
    .logo {
      display: block;
      margin: 0 auto 25px;
      max-width: 160px;
      border-radius: 50%;
      border: 3px solid #10b981;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 30px;
      color: #10b981;
      line-height: 1.3;
    }
    .question-label {
      font-weight: 600;
      margin-bottom: 12px;
      display: block;
      font-size: 16px;
    }
    .radio-group {
      margin-bottom: 25px;
    }
    .radio-label {
      display: block;
      background-color: #111827;
      padding: 14px 20px;
      border-radius: 12px;
      border: 2px solid #4b5563;
      cursor: pointer;
      margin-bottom: 10px;
      color: #e5e7eb;
      transition: 0.3s;
      position: relative;
    }
    .radio-label:hover {
      border-color: #10b981;
      background-color: #172022;
    }
    .radio-label input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 100%;
      width: 100%;
      top: 0;
      left: 0;
      margin: 0;
    }
    .radio-label input:checked + span {
      background-color: #10b981;
      color: white;
      border-radius: 10px;
      padding: 6px 12px;
      font-weight: 600;
      display: inline-block;
    }
    .error {
      color: #f87171;
      font-size: 13px;
      margin-top: -5px;
      margin-bottom: 15px;
    }
    input[type="text"] {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background-color: #111827;
      color: #e5e7eb;
      margin-bottom: 20px;
    }
    button[type="button"] {
      width: 100%;
      padding: 14px;
      background-color: #10b981;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button[type="button"]:hover {
      background-color: #0f8e69;
    }
    .result {
      margin-top: 25px;
      padding: 20px;
      background-color: #065f46;
      border-radius: 15px;
      text-align: center;
      font-size: 18px;
      display: none;
      color: #e0ffe0;
    }
    .retry-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #ef4444;
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      display: none;
      transition: background-color 0.3s ease;
    }
    .retry-btn:hover {
      background-color: #dc2626;
    }
    label[for="musicSelect"] {
      margin-top: 20px;
      display: block;
      font-weight: 600;
      color: #10b981;
      margin-bottom: 8px;
    }
    select#musicSelect {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background-color: #111827;
      color: #e5e7eb;
      font-size: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg fill="%23e5e7eb" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 12px center;
      background-size: 16px 16px;
    }
    .music-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #10b981;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 8px;
    }
  </style>
</head>
<body>
  <div class="card">
    <img src="logo.png" alt="LARUSSO Logo" class="logo" />
    <h1>Тест на повышение с 5 до 6 ранга<br>LARUSSO Family</h1>

    <form id="quizForm">

      <!-- ... остальные части кода остаются без изменений ... -->

    <label for="name" class="question-label">Введите ваш ник:</label>
    <input type="text" id="name" placeholder="Например: Family_Larusso" />
    <div class="error" id="errorName"></div>

<!-- ... остальной код -->


      <label class="question-label">1. В какое время проводится мероприятие "Зловещий дворец"?</label>
      <div class="radio-group" id="q1">
        <label class="radio-label"><input type="radio" name="q1" value="18:00-18:20"><span>С 18:00 до 18:20 МСК</span></label>
        <label class="radio-label"><input type="radio" name="q1" value="19:00-19:17"><span>С 19:00 до 19:17 МСК</span></label>
        <label class="radio-label"><input type="radio" name="q1" value="20:00-20:15"><span>С 20:00 до 20:15 МСК</span></label>
        <label class="radio-label"><input type="radio" name="q1" value="21:00-21:30"><span>С 21:00 до 21:30 МСК</span></label>
        <label class="radio-label"><input type="radio" name="q1" value="22:00-23:05"><span>С 22:00 до 23:05 МСК</span></label>
      </div>
      <div class="error" id="errorQ1"></div>

      <label class="question-label">2. Какое оружие допускается к использованию на "Зловещем дворце"?</label>
      <div class="radio-group" id="q2">
        <label class="radio-label"><input type="radio" name="q2" value="любое"><span>Любое, включая автоматическое</span></label>
        <label class="radio-label"><input type="radio" name="q2" value="только холодное"><span>Только холодное</span></label>
        <label class="radio-label"><input type="radio" name="q2" value="только пистолеты"><span>Только пистолеты</span></label>
        <label class="radio-label"><input type="radio" name="q2" value="только в целях самообороны"><span>Только в целях самообороны</span></label>
        <label class="radio-label"><input type="radio" name="q2" value="любое без ограничений"><span>Любое оружие без ограничений</span></label>
      </div>
      <div class="error" id="errorQ2"></div>

      <label class="question-label">3. Что запрещено делать с бронежилетом во время перестрелки?</label>
      <div class="radio-group" id="q3">
        <label class="radio-label"><input type="radio" name="q3" value="снимать"><span>Снимать его</span></label>
        <label class="radio-label"><input type="radio" name="q3" value="использовать в начале"><span>Использовать в начале боя</span></label>
        <label class="radio-label"><input type="radio" name="q3" value="надевать в момент"><span>Надевать в момент перестрелки</span></label>
        <label class="radio-label"><input type="radio" name="q3" value="делать замену"><span>Делать замену на новый</span></label>
        <label class="radio-label"><input type="radio" name="q3" value="носить при входе"><span>Носить при входе в здание</span></label>
      </div>
      <div class="error" id="errorQ3"></div>

      <label class="question-label">4. Какое правило касается масок на мероприятиях WarFam?</label>
      <div class="radio-group" id="q4">
        <label class="radio-label"><input type="radio" name="q4" value="обязательны"><span>Маски обязательны для всех</span></label>
        <label class="radio-label"><input type="radio" name="q4" value="допустимы только RP"><span>Допустимы только RP-маски</span></label>
        <label class="radio-label"><input type="radio" name="q4" value="разрешены по договорённости"><span>Разрешены по договорённости</span></label>
        <label class="radio-label"><input type="radio" name="q4" value="строго запрещено"><span>Использование масок строго запрещено</span></label>
        <label class="radio-label"><input type="radio" name="q4" value="только старший состав"><span>Маски разрешены только старшему составу</span></label>
      </div>
      <div class="error" id="errorQ4"></div>

      <label class="question-label">5. Допускается ли нападение на члена своей семьи во время WarFam?</label>
      <div class="radio-group" id="q5">
        <label class="radio-label"><input type="radio" name="q5" value="если провоцирует"><span>Если он провоцирует конфликт</span></label>
        <label class="radio-label"><input type="radio" name="q5" value="если нарушает правила"><span>Если нарушает правила</span></label>
        <label class="radio-label"><input type="radio" name="q5" value="запрещено"><span>Нет, нападение строго запрещено</span></label>
        <label class="radio-label"><input type="radio" name="q5" value="с разрешения лидера"><span>Только с разрешения лидера</span></label>
        <label class="radio-label"><input type="radio" name="q5" value="часть плана"><span>Если это часть плана</span></label>
      </div>
      <div class="error" id="errorQ5"></div>

      <label class="question-label">6. Какие баги можно использовать в стрельбе?</label>
      <div class="radio-group" id="q6">
        <label class="radio-label"><input type="radio" name="q6" value="только визуальные"><span>Только визуальные</span></label>
        <label class="radio-label"><input type="radio" name="q6" value="только в тренировках"><span>Только в тренировках</span></label>
        <label class="radio-label"><input type="radio" name="q6" value="запрещено"><span>Никакие — все баги стрельбы под запретом</span></label>
        <label class="radio-label"><input type="radio" name="q6" value="с разрешения"><span>С разрешения администрации</span></label>
        <label class="radio-label"><input type="radio" name="q6" value="не дают преимущества"><span>Те, которые не дают преимущества</span></label>
      </div>
      <div class="error" id="errorQ6"></div>

      <!-- Список музыки -->
      <label for="musicSelect" class="question-label">Выберите музыку:</label>
      <select id="musicSelect" aria-label="Выбор музыки">
        <option value="ambient-background-music-7897.mp3">Ambient Background Music</option>
        <option value="calm-inspiration.mp3">Calm Inspiration</option>
        <option value="upbeat-electronic.mp3">Upbeat Electronic</option>
        <option value="chillhop-beats.mp3">Chillhop Beats</option>
      </select>

      <button type="button" id="submitBtn">Проверить</button>
    </form>

    <div class="result" id="resultBox"></div>
    <button class="retry-btn" id="retryBtn">Начать заново</button>
  </div>

  <audio id="bgMusic" loop></audio>
  <button class="music-toggle" id="musicToggleBtn"><span id="musicIcon">🔇</span> <span id="musicText">Вкл</span></button>

  <script>
    const correctAnswers = {
      q1: "20:00-20:15",
      q2: "любое без ограничений",
      q3: "надевать в момент",
      q4: "строго запрещено",
      q5: "запрещено",
      q6: "запрещено"
    };

    const form = document.getElementById('quizForm');
    const resultBox = document.getElementById('resultBox');
    const retryBtn = document.getElementById('retryBtn');
    const submitBtn = document.getElementById('submitBtn');
    const bgMusic = document.getElementById('bgMusic');
    const musicToggleBtn = document.getElementById('musicToggleBtn');
    const musicIcon = document.getElementById('musicIcon');
    const musicText = document.getElementById('musicText');
    const musicSelect = document.getElementById('musicSelect');

    function clearErrors() {
      document.getElementById('errorName').textContent = "";
      for (let i = 1; i <= 6; i++) {
        document.getElementById('errorQ'+i).textContent = "";
      }
    }

    function getSelectedValue(name) {
      const radios = document.getElementsByName(name);
      for (const radio of radios) {
        if (radio.checked) return radio.value;
      }
      return null;
    }

    submitBtn.addEventListener('click', () => {
      clearErrors();
      let isError = false;
      const nameVal = document.getElementById('name').value.trim();
      if (!nameVal) {
        document.getElementById('errorName').textContent = "Пожалуйста, введите ник.";
        isError = true;
      }
      let answers = {};
      for (let i = 1; i <= 6; i++) {
        let val = getSelectedValue('q'+i);
        if (!val) {
          document.getElementById('errorQ'+i).textContent = "Выберите вариант ответа.";
          isError = true;
        }
        answers['q'+i] = val;
      }
      if (isError) return;

      let score = 0;
      for (let i = 1; i <= 6; i++) {
        if (answers['q'+i] === correctAnswers['q'+i]) score++;
      }

      resultBox.style.display = 'block';
      resultBox.innerHTML = `
        <h2>Результаты теста, ${nameVal}:</h2>
        <p>Вы набрали ${score} из 6 баллов.</p>
        <p>${score === 6 ? "Поздравляем! Вы успешно прошли тест." : "Попробуйте еще раз для достижения максимального результата."}</p>
      `;
      form.style.display = 'none';
      submitBtn.style.display = 'none';
      retryBtn.style.display = 'inline-block';
    });

    retryBtn.addEventListener('click', () => {
      form.reset();
      form.style.display = 'block';
      resultBox.style.display = 'none';
      retryBtn.style.display = 'none';
      submitBtn.style.display = 'inline-block';
      document.getElementById('name').value = "Family";
    });

    // Музыка
    bgMusic.src = musicSelect.value;
    bgMusic.volume = 0.3;

    musicSelect.addEventListener('change', () => {
      bgMusic.src = musicSelect.value;
      if (!bgMusic.paused) {
        bgMusic.play();
      }
    });

    musicToggleBtn.addEventListener('click', () => {
      if (bgMusic.paused) {
        bgMusic.play();
        musicIcon.textContent = "🔊";
        musicText.textContent = "Выкл";
      } else {
        bgMusic.pause();
        musicIcon.textContent = "🔇";
        musicText.textContent = "Вкл";
      }
    });
  </script>
</body>
</html>
