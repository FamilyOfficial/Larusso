<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LARUSSO –¢–µ—Å—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Rubik', sans-serif;
      background: linear-gradient(to right, #1f2937, #111827);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .card {
      background-color: #1c1f26;
      padding: 40px 40px 50px;
      max-width: 750px;
      width: 95%;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
      position: relative;
    }
    .logo {
      display: block;
      margin: 0 auto 25px;
      max-width: 160px;
      border-radius: 50%;
      border: 3px solid #10b981;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 30px;
      color: #10b981;
      line-height: 1.3;
    }
    label {
      display: block;
      font-weight: 600;
      margin: 20px 0 10px;
      font-size: 16px;
    }
    input, select {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background-color: #111827;
      color: #e5e7eb;
      font-size: 15px;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #10b981;
      background-color: #1f2937;
    }
    input::placeholder {
      color: #9ca3af;
    }
    .error {
      color: #f87171;
      font-size: 13px;
      margin-top: 5px;
      min-height: 18px;
    }
    button[type="submit"] {
      margin-top: 30px;
      width: 100%;
      padding: 14px;
      background-color: #10b981;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button[type="submit"]:hover {
      background-color: #0f9f77;
    }
    .result {
      margin-top: 25px;
      padding: 20px;
      background-color: #065f46;
      border-radius: 12px;
      text-align: center;
      font-size: 18px;
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .result.show {
      display: block;
      opacity: 1;
    }
    .result strong {
      font-size: 20px;
      color: #fff;
    }
    .retry-btn {
      margin-top: 20px;
      padding: 12px 0;
      background-color: #ef4444;
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    .retry-btn:hover {
      background-color: #b91c1c;
    }
    .music-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #10b981;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      z-index: 9999;
      box-shadow: 0 4px 8px rgba(16, 185, 129, 0.4);
      transition: background-color 0.3s ease, transform 0.2s ease;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .music-toggle:hover {
      background-color: #0f9f77;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <div class="card">
    <img src="logo.png" alt="LARUSSO Logo" class="logo" />
    <h1>–¢–µ—Å—Ç –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ<br>—Å 2 –¥–æ 3 —Ä–∞–Ω–≥–∞<br>LARUSSO Family</h1>

    <form id="quizForm" novalidate>
      <label for="name">–í–∞—à –Ω–∏–∫:</label>
      <input type="text" id="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Evgen_Larusso" required />
      <div class="error" id="errorMessageName"></div>

      <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç–æ–º -->
      <div id="questionsContainer"></div>

      <button type="submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </form>

    <div class="result" id="resultBox">
      <button class="retry-btn" id="retryBtn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>
  </div>

  <audio id="bgMusic" loop>
    <source src="cala_bonita.m4a" type="audio/mp4" />
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
  </audio>

  <button class="music-toggle" id="musicToggleBtn" onclick="toggleMusic()">
    <span id="musicIcon">üîá</span> <span id="musicText">–í–∫–ª</span>
  </button>

  <script>
    // –ú—É–∑—ã–∫–∞ –∏ –∫–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    const music = document.getElementById('bgMusic');
    const btn = document.getElementById('musicToggleBtn');
    const icon = document.getElementById('musicIcon');
    const text = document.getElementById('musicText');
    let isPlaying = false;

    function toggleMusic() {
      if (isPlaying) {
        music.pause();
        icon.textContent = 'üîá';
        text.textContent = '–í–∫–ª';
      } else {
        music.play();
        icon.textContent = 'üîä';
        text.textContent = '–í—ã–∫–ª';
      }
      isPlaying = !isPlaying;
    }

    // –í–æ–ø—Ä–æ—Å—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    const questions = [
      {
        id: 'q1',
        text: '1. –ú–æ–∂–Ω–æ –ª–∏ –º–ª–∞–¥—à–µ–º—É —Å–æ—Å—Ç–∞–≤—É –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–µ–º–∏–∏, –±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –≤ –∞—Ä–µ–Ω–¥—É?',
        answers: [
          { value: '–Ω–µ–ª—å–∑—è', text: '–ù–µ–ª—å–∑—è' },
          { value: '–º–æ–∂–Ω–æ_–∫–∞–∂–¥–æ–º—É', text: '–ú–æ–∂–Ω–æ –∫–∞–∂–¥–æ–º—É —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≥–ª–∞–≤—ã' },
          { value: '—Ç–æ–ª—å–∫–æ_—Å_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è', text: '–¢–æ–ª—å–∫–æ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≥–ª–∞–≤—ã —Å–µ–º—å–∏' },
          { value: '–≤—Å–µ–≥–¥–∞_–º–æ–∂–Ω–æ', text: '–í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è' }
        ],
        correct: '—Ç–æ–ª—å–∫–æ_—Å_—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è',
        points: 1
      },
      {
        id: 'q2',
        text: '2. –ö–æ–º—É –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è –º–ª–∞–¥—à–∏–π —Å–æ—Å—Ç–∞–≤?',
        answers: [
          { value: '–Ω–∏–∫–æ–º—É', text: '–ù–∏–∫–æ–º—É' },
          { value: '—á–µ—Ä–Ω—ã–π_–ø–æ—è—Å', text: '–ß–µ—Ä–Ω–æ–º—É –ø–æ—è—Å—É (5 —Ä–∞–Ω–≥)' },
          { value: '–º–∞—Å—Ç–µ—Ä–∞–º', text: '–ú–∞—Å—Ç–µ—Ä–∞–º (7 —Ä–∞–Ω–≥)' },
          { value: '–≥–ª–∞–≤–µ', text: '–ì–ª–∞–≤–µ —Å–µ–º—å–∏' }
        ],
        correct: '–º–∞—Å—Ç–µ—Ä–∞–º',
        points: 1
      },
      {
        id: 'q3',
        text: '3. –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–±–ª—é–¥–∞—Ç—å —á–ª–µ–Ω —Å–µ–º—å–∏?',
        answers: [
          { value: '—Å–µ–º—å–∏', text: '–ü—Ä–∞–≤–∏–ª–∞ —Å–µ–º—å–∏' },
          { value: '—Å–µ—Ä–≤–µ—Ä–∞', text: '–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞' },
          { value: '–ø—Ä–æ–µ–∫—Ç–∞', text: '–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞' },
          { value: '–≤—Å–µ', text: '–í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–µ—Ä–Ω—ã' }
        ],
        correct: '–≤—Å–µ',
        points: 2
      },
      {
        id: 'q4',
        text: '4. –ú–æ–∂–µ—Ç –ª–∏ –º–ª–∞–¥—à–∏–π —Å–æ—Å—Ç–∞–≤ –æ–±–∂–∞–ª–æ–≤–∞—Ç—å –ø—Ä–∏–∫–∞–∑ –º–∞—Å—Ç–µ—Ä–∞?',
        answers: [
          { value: '–Ω–µ—Ç', text: '–ù–µ—Ç, –º–∞—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤' },
          { value: '–º–æ–∂–µ—Ç', text: '–ú–æ–∂–µ—Ç –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–µ–º–µ –≤ TG –∫–∞–Ω–∞–ª–µ' }
        ],
        correct: '–º–æ–∂–µ—Ç',
        points: 1
      },
      {
        id: 'q5',
        text: '5. –ú–æ–∂–µ—Ç –ª–∏ –º–ª–∞–¥—à–∏–π —Å–æ—Å—Ç–∞–≤ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä—ã –∏ —Å–µ–º–µ–π–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è? (–í—ã–±–µ—Ä–∏—Ç–µ 2 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞)',
        answers: [
          { value: '—É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–∞—è_–ø—Ä–∏—á–∏–Ω–∞', text: '–†–∞–∑—Ä–µ—à–µ–Ω–æ, –µ—Å–ª–∏ –µ—Å—Ç—å —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞' },
          { value: '–º–æ–∂–µ—Ç', text: '–ú–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å' },
          { value: '–∑–∞–ø—Ä–µ—â–µ–Ω–æ', text: '–ó–∞–ø—Ä–µ—â–µ–Ω–æ, –µ—Å–ª–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ —Ä–∞—Å–ø–æ—Ä—è–¥–∫–æ–º –¥–Ω—è' },
          { value: '–∏–Ω–æ–≥–¥–∞', text: '–ò–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ' }
        ],
        correct: ['—É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–∞—è_–ø—Ä–∏—á–∏–Ω–∞', '–∑–∞–ø—Ä–µ—â–µ–Ω–æ'],
        points: 2,
        multiple: true
      }
    ];

    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    const questionsContainer = document.getElementById('questionsContainer');

    // –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
    function renderQuestions() {
      questionsContainer.innerHTML = '';

      questions.forEach((q, index) => {
        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
        const answersShuffled = shuffle([...q.answers]);

        const label = document.createElement('label');
        label.textContent = q.text;
        label.setAttribute('for', q.id);
        questionsContainer.appendChild(label);

        if (q.multiple) {
          // –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ ‚Äî —á–µ–∫–±–æ–∫—Å—ã
          const checkboxGroup = document.createElement('div');
          checkboxGroup.className = 'checkbox-group';
          checkboxGroup.style.marginBottom = '10px';

          answersShuffled.forEach(ans => {
            const id = q.id + '_' + ans.value;
            const wrapper = document.createElement('label');
            wrapper.htmlFor = id;

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.name = q.id;
            checkbox.id = id;
            checkbox.value = ans.value;

            wrapper.appendChild(checkbox);
            wrapper.appendChild(document.createTextNode(ans.text));

            checkboxGroup.appendChild(wrapper);
          });

          questionsContainer.appendChild(checkboxGroup);
        } else {
          // –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ ‚Äî select
          const select = document.createElement('select');
          select.id = q.id;
          select.name = q.id;
          select.required = true;

          const emptyOption = document.createElement('option');
          emptyOption.value = '';
          emptyOption.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç';
          select.appendChild(emptyOption);

          answersShuffled.forEach(ans => {
            const option = document.createElement('option');
            option.value = ans.value;
            option.textContent = ans.text;
            select.appendChild(option);
          });

          questionsContainer.appendChild(select);
        }

        // –û—à–∏–±–∫–∞ –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error';
        errorDiv.id = 'errorMessage' + q.id.toUpperCase();
        questionsContainer.appendChild(errorDiv);
      });
    }

    renderQuestions();

    const quizForm = document.getElementById('quizForm');
    const resultBox = document.getElementById('resultBox');
    const retryBtn = document.getElementById('retryBtn');

    quizForm.addEventListener('submit', (e) => {
      e.preventDefault();

      let error = false;

      const nameInput = document.getElementById('name');
      const name = nameInput.value.trim();
      if (!name) {
        document.getElementById('errorMessageName').textContent = '–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫';
        error = true;
      } else {
        document.getElementById('errorMessageName').textContent = '';
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
      questions.forEach(q => {
        const errorEl = document.getElementById('errorMessage' + q.id.toUpperCase());
        if (q.multiple) {
          const checked = [...document.querySelectorAll(`input[name="${q.id}"]:checked`)].map(c => c.value);
          if (checked.length < 2) {
            errorEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–Ω–∏–º—É–º –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞';
            error = true;
          } else {
            errorEl.textContent = '';
          }
        } else {
          const select = document.getElementById(q.id);
          if (!select.value) {
            errorEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç';
            error = true;
          } else {
            errorEl.textContent = '';
          }
        }
      });

      if (error) return;

      // –ü–æ–¥—Å—á—ë—Ç –±–∞–ª–ª–æ–≤
      let score = 0;
      questions.forEach(q => {
        if (q.multiple) {
          const checked = [...document.querySelectorAll(`input[name="${q.id}"]:checked`)].map(c => c.value);
          if (q.correct.every(c => checked.includes(c))) {
            score += q.points;
          }
        } else {
          const select = document.getElementById(q.id);
          if (select.value === q.correct) {
            score += q.points;
          }
        }
      });

      // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      let resultText = `<strong>${name}</strong><br>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ 7 –±–∞–ª–ª–æ–≤<br><br>`;
      if (score === 7) {
        resultText += `üéâ –û—Ç–ª–∏—á–Ω–æ! –í—ã –≥–æ—Ç–æ–≤—ã –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é.<br>–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω –¥–ª—è –æ—Ç—á—ë—Ç–∞.`;
      } else {
        resultText += `üîÅ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.`;
      }

      resultBox.innerHTML = resultText;
      resultBox.appendChild(retryBtn);
      resultBox.classList.add('show');
      quizForm.style.display = 'none';
    });

    retryBtn.addEventListener('click', () => {
      quizForm.reset();
      quizForm.style.display = 'block';
      resultBox.classList.remove('show');
      // –ß–∏—Å—Ç–∏–º –æ—à–∏–±–∫–∏
      document.getElementById('errorMessageName').textContent = '';
      questions.forEach(q => {
        document.getElementById('errorMessage' + q.id.toUpperCase()).textContent = '';
      });
      // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–Ω–æ–≤–æ –∏ –∑–∞–Ω–æ–≤–æ —Ä–∏—Å—É–µ–º –≤–æ–ø—Ä–æ—Å—ã
      renderQuestions();
    });
  </script>
</body>
</html>
